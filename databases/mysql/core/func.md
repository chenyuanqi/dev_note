
### Mysql 内置函数

**MySQL 数值型函数**  

| 函数名称 | 作用 |   
| ---: | :--- |  
| abs | 求绝对值 |   
| sqrt | 求二次方根 |   
| mod | 求余数 |   
| ceil 和 ceiling | 两个函数功能相同，都是返回不小于参数的最小整数，即向上取整 |   
| floor | 向下取整，返回值转化为一个 BIGINT |   
| rand | 生成一个 0~1 之间的随机数，传入整数参数是，用来产生重复序列 |   
| round | 对所传参数进行四舍五入
| sign | 返回参数的符号
| pow 和 power | 两个函数的功能相同，都是所传参数的次方的结果值 |   
| sin | 求正弦值 |   
| asin | 求反正弦值，与函数 SIN 互为反函数 |   
| cos | 求余弦值 |   
| acos | 求反余弦值，与函数 COS 互为反函数 |   
| tan | 求正切值 |   
| atan | 求反正切值，与函数 TAN 互为反函数 |   
| cot | 求余切值 |   

**MySQL 字符串函数**  

| 函数名称 | 作 用 |   
| ---: | :--- |  
| length | 计算字符串长度函数，返回字符串的字节长度 |   
| concat | 合并字符串函数，返回结果为连接参数产生的字符串，参数可以使一个或多个 |   
| insert | 替换字符串函数 |   
| lower | 将字符串中的字母转换为小写 |   
| upper | 将字符串中的字母转换为大写 |   
| left | 从左侧字截取符串，返回字符串左边的若干个字符 |   
| right | 从右侧字截取符串，返回字符串右边的若干个字符 |   
| trim | 删除字符串左右两侧的空格 |   
| replace | 字符串替换函数，返回替换后的新字符串 |   
| substr 和 substring | 截取字符串，返回从指定位置开始的指定长度的字符换 |   
| reverse | 字符串反转（逆序）函数，返回与原始字符串顺序相反的字符串 |   

**MySQL 日期和时间函数**  

| 函数名称 | 作 用 |   
| ---: | :--- |  
| curdate 和 current_date | 两个函数作用相同，返回当前系统的日期值 |   
| curtime 和 current_time | 两个函数作用相同，返回当前系统的时间值 |   
| now 和 sysdate | 两个函数作用相同，返回当前系统的日期和时间值 |   
| unix_timestamp | 获取 UNIX 时间戳函数，返回一个以 UNIX 时间戳为基础的无符号整数 |   
| from_unixtime | 将 UNIX 时间戳转换为时间格式，与 UNIX_TIMESTAMP 互为反函数 |   
| month | 获取指定日期中的月份 |   
| monthname | 获取指定日期中的月份英文名称 |   
| dayname | 获取指定曰期对应的星期几的英文名称 |   
| dayofweek | 获取指定日期是一周中是第几天，返回值范围是 1~7,1 = 周日 |   
| week | 获取指定日期是一年中的第几周，返回值的范围是否为 0〜52 或 1〜53 |   
| dayofyear | 获取指定曰期是一年中的第几天，返回值范围是 1~366 |   
| dayofmonth | 获取指定日期是一个月中是第几天，返回值范围是 1~31 |   
| year | 获取年份，返回值范围是 1970〜2069 |   
| time_to_sec | 将时间参数转换为秒数 |   
| sec_to_time | 将秒数转换为时间，与 TIME_TO_SEC 互为反函数 |   
| date_add 和 adddate | 两个函数功能相同，都是向日期添加指定的时间间隔 |   
| date_sub 和 subdate | 两个函数功能相同，都是向日期减去指定的时间间隔 |   
| addtime | 时间加法运算，在原始时间上添加指定的时间 |   
| subtime | 时间减法运算，在原始时间上减去指定的时间 |   
| datediff | 获取两个日期之间间隔，返回参数 1 减去参数 2 的值 |   
| date_format | 格式化指定的日期，根据参数返回指定格式的值 |   
| weekday | 获取指定日期在一周内的对应的工作日索引 |   

```sql
mysql> select curdate(),current_date(),current_date()+1;
+------------+----------------+------------------+
| curdate()  | current_date() | current_date()+1 |
+------------+----------------+------------------+
| 2019-09-17 | 2019-09-17     |         20190918 |
+------------+----------------+------------------+

mysql> select curtime(),current_time(),current_time()+1;
+-----------+----------------+------------------+
| curtime() | current_time() | current_time()+1 |
+-----------+----------------+------------------+
| 16:11:25  | 16:11:25       |           161126 |
+-----------+----------------+------------------+

mysql> select now(),sysdate();
+---------------------+---------------------+
| now()               | sysdate()           |
+---------------------+---------------------+
| 2019-09-17 16:13:28 | 2019-09-17 16:13:28 |
+---------------------+---------------------+

mysql> select unix_timestamp(),unix_timestamp(now()),now(),unix_timestamp('2019-09-17 12:00:00');
+------------------+-----------------------+---------------------+---------------------------------------+
| unix_timestamp() | unix_timestamp(now()) | now()               | unix_timestamp('2019-09-17 12:00:00') |
+------------------+-----------------------+---------------------+---------------------------------------+
|       1568710893 |            1568710893 | 2019-09-17 17:01:33 |                            1568692800 |
+------------------+-----------------------+---------------------+---------------------------------------+

mysql> select from_unixtime(1568710866),from_unixtime(1568710866,'%Y-%m-%d %H:%h:%s');
+---------------------------+-----------------------------------------------+
| from_unixtime(1568710866) | from_unixtime(1568710866,'%Y-%m-%d %H:%h:%s') |
+---------------------------+-----------------------------------------------+
| 2019-09-17 17:01:06       | 2019-09-17 17:05:06                           |
+---------------------------+-----------------------------------------------+

mysql> select month('2017-12-15'),month(now());
+---------------------+--------------+
| month('2017-12-15') | month(now()) |
+---------------------+--------------+
|                  12 |            9 |
+---------------------+--------------+

mysql> select monthname('2017-12-15'),monthname(now());
+-------------------------+------------------+
| monthname('2017-12-15') | monthname(now()) |
+-------------------------+------------------+
| December                | September        |
+-------------------------+------------------+

mysql> select now(),dayname(now());
+---------------------+----------------+
| now()               | dayname(now()) |
+---------------------+----------------+
| 2019-09-17 17:13:08 | Tuesday        |
+---------------------+----------------+

mysql> select now(),dayofweek(now());
+---------------------+------------------+
| now()               | dayofweek(now()) |
+---------------------+------------------+
| 2019-09-17 17:14:21 |                3 |
+---------------------+------------------+

mysql> SHOW VARIABLES LIKE 'default_week_format';
+---------------------+-------+
| Variable_name       | Value |
+---------------------+-------+
| default_week_format | 0     |
+---------------------+-------+

mysql> select now(),week(now());
+---------------------+-------------+
| now()               | week(now()) |
+---------------------+-------------+
| 2019-09-17 17:20:28 |          37 |
+---------------------+-------------+

mysql> select now(),dayofyear(now()),dayofyear('2019-01-01');
+---------------------+------------------+-------------------------+
| now()               | dayofyear(now()) | dayofyear('2019-01-01') |
+---------------------+------------------+-------------------------+
| 2019-09-17 17:22:00 |              260 |                       1 |
+---------------------+------------------+-------------------------+

mysql> select now(),dayofmonth(now()),dayofmonth('2019-01-01');
+---------------------+-------------------+--------------------------+
| now()               | dayofmonth(now()) | dayofmonth('2019-01-01') |
+---------------------+-------------------+--------------------------+
| 2019-09-17 17:23:09 |                17 |                        1 |
+---------------------+-------------------+--------------------------+

mysql> select now(),year(now()),year('2019-01-02');
+---------------------+-------------+--------------------+
| now()               | year(now()) | year('2019-01-02') |
+---------------------+-------------+--------------------+
| 2019-09-17 17:28:10 |        2019 |               2019 |
+---------------------+-------------+--------------------+

mysql> select time_to_sec('15:15:15'),now(),time_to_sec(now());
+-------------------------+---------------------+--------------------+
| time_to_sec('15:15:15') | now()               | time_to_sec(now()) |
+-------------------------+---------------------+--------------------+
|                   54915 | 2019-09-17 17:30:44 |              63044 |
+-------------------------+---------------------+--------------------+

mysql> select sec_to_time(100),sec_to_time(10000);
+------------------+--------------------+
| sec_to_time(100) | sec_to_time(10000) |
+------------------+--------------------+
| 00:01:40         | 02:46:40           |
+------------------+--------------------+

mysql> select date_add('2019-01-01',INTERVAL 10 day),adddate('2019-01-01 16:00:00',interval 100 SECOND);
+----------------------------------------+----------------------------------------------------+
| date_add('2019-01-01',INTERVAL 10 day) | adddate('2019-01-01 16:00:00',interval 100 SECOND) |
+----------------------------------------+----------------------------------------------------+
| 2019-01-11                             | 2019-01-01 16:01:40                                |
+----------------------------------------+----------------------------------------------------+

mysql> select date_add('2019-01-01',INTERVAL -10 day),adddate('2019-01-01 16:00:00',interval -100 SECOND);
+-----------------------------------------+-----------------------------------------------------+
| date_add('2019-01-01',INTERVAL -10 day) | adddate('2019-01-01 16:00:00',interval -100 SECOND) |
+-----------------------------------------+-----------------------------------------------------+
| 2018-12-22                              | 2019-01-01 15:58:20                                 |
+-----------------------------------------+-----------------------------------------------------+

mysql> select date_sub('2019-01-01',INTERVAL 10 day),subdate('2019-01-01 16:00:00',interval 100 SECOND);
+----------------------------------------+----------------------------------------------------+
| date_sub('2019-01-01',INTERVAL 10 day) | subdate('2019-01-01 16:00:00',interval 100 SECOND) |
+----------------------------------------+----------------------------------------------------+
| 2018-12-22                             | 2019-01-01 15:58:20                                |
+----------------------------------------+----------------------------------------------------+

mysql> select date_sub('2019-01-01',INTERVAL -10 day),subdate('2019-01-01 16:00:00',interval -100 SECOND);
+-----------------------------------------+-----------------------------------------------------+
| date_sub('2019-01-01',INTERVAL -10 day) | subdate('2019-01-01 16:00:00',interval -100 SECOND) |
+-----------------------------------------+-----------------------------------------------------+
| 2019-01-11                              | 2019-01-01 16:01:40                                 |
+-----------------------------------------+-----------------------------------------------------+

mysql> select addtime('2019-09-18 23:59:59','0:1:1'), addtime('10:30:59','5:10:37');
+----------------------------------------+-------------------------------+
| addtime('2019-09-18 23:59:59','0:1:1') | addtime('10:30:59','5:10:37') |
+----------------------------------------+-------------------------------+
| 2019-09-19 00:01:00                    | 15:41:36                      |
+----------------------------------------+-------------------------------+

mysql> select subtime('2019-09-18 23:59:59','0:1:1'),subtime('10:30:59','5:12:37');
+----------------------------------------+-------------------------------+
| subtime('2019-09-18 23:59:59','0:1:1') | subtime('10:30:59','5:12:37') |
+----------------------------------------+-------------------------------+
| 2019-09-18 23:58:58                    | 05:18:22                      |
+----------------------------------------+-------------------------------+

mysql> select datediff('2017-11-30','2017-11-29') as col1, datediff('2017-11-30','2017-12-15') as col2;
+------+------+
| col1 | col2 |
+------+------+
|    1 |  -15 |
+------+------+

mysql> select date_format('2017-11-30','%Y%m%d') as col0,now() as col1, date_format(now(),'%Y%m%d%H%i%s') as col2;
+----------+---------------------+----------------+
| col0     | col1                | col2           |
+----------+---------------------+----------------+
| 20171130 | 2019-09-17 17:56:12 | 20190917175612 |
+----------+---------------------+----------------+

mysql> select now(),weekday(now());
+---------------------+----------------+
| now()               | weekday(now()) |
+---------------------+----------------+
| 2019-09-17 18:01:34 |              1 |
+---------------------+----------------+

mysql> select now(),dayofweek(now());
+---------------------+------------------+
| now()               | dayofweek(now()) |
+---------------------+------------------+
| 2019-09-17 18:01:34 |                3 |
+---------------------+------------------+
```

**MySQL 聚合函数**  

| 函数名称 | 作用 |   
| ---: | :--- |  
| max | 查询指定列的最大值 |   
| min | 查询指定列的最小值 |   
| count | 统计查询结果的行数 |   
| sum | 求和，返回指定列的总和 |   
| avg | 求平均值，返回指定列数据的平均值 |   

**MySQL 流程控制函数**  

| 函数名称 | 作用 |   
| ---: | :--- |  
| if | 判断，流程控制 |   
| ifnull | 判断是否为空 |   
| case | 搜索语句 |   

**其他函数**  

| 函数名称 | 作用 |   
| ---: | :--- |  
| version | 数据库版本号 |   
| database | 当前的数据库 |   
| user | 当前连接用户 |   
| password | 返回字符串密码形式 |   
| md5 | 返回字符串的 md5 数据 |   



