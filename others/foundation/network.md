
### 计算机网络
计算机网络是通信技术与计算机技术结合的产物，也就是说计算机网络是为了解决计算机与计算机之间通讯的问题。  

一般地，计算机网络的学习会考虑中和 OSI 和 TCP/IP 的优点，从而采用一种只有五层协议的体系结构。  
![计算机的五层体系结构](https://s2.ax1x.com/2019/08/12/mSk8iV.png)  

**应用层**  
应用层 (application-layer）的任务是通过应用进程间的交互来完成特定网络应用。应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则。对于不同的网络应用需要不同的应用层协议。在互联网中应用层协议很多，如域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议等等。我们把应用层交互的数据单元称为报文。  
> 域名系统 (Domain Name System 缩写 DNS，Domain Name 被译为域名) 是因特网的一项核心服务，它作为可以将域名和 IP 地址相互映射的一个分布式数据库，能够使人更方便的访问互联网，而不用去记住能够被机器直接读取的 IP 数串。  
> 超文本传输协议（HTTP，HyperText Transfer Protocol) 是互联网上应用最为广泛的一种网络协议。所有的 WWW（万维网） 文件都必须遵守这个标准。设计 HTTP 最初的目的是为了提供一种发布和接收 HTML 页面的方法。  

**运输层**  
运输层 (transport layer) 的主要任务就是负责向两台主机进程之间的通信提供通用的数据传输服务。应用进程利用该服务传送应用层报文。“通用的” 是指并不针对某一个特定的网络应用，而是多种应用可以使用同一个运输层服务。由于一台主机可同时运行多个线程，因此运输层有复用和分用的功能。所谓复用就是指多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程。  
> 运输层主要使用以下两种协议：  
> 传输控制协议 TCP（Transmission Control Protocol）提供 面向连接的，可靠的数据传输服务。  
> 用户数据协议 UDP（User Datagram Protocol）提供 无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性）。  

**网络层**  
在计算机网络中进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。网络层的任务就是选择合适的网间路由和交换结点，确保数据及时传送。 在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。在 TCP/IP 体系结构中，由于网络层使用 IP 协议，因此分组也叫 IP 数据报，简称数据报。  
`不要把运输层的 “用户数据报 UDP” 和网络层的 “IP 数据报” 弄混`

网络层中的 “网络” 二字已经不是我们通常谈到的具体网络，而是指计算机网络体系结构模型中第三层的名称。  
互联网是由大量的异构（heterogeneous）网络通过路由器（router）相互连接起来的。互联网使用的网络层协议是无连接的网际协议（Intert Protocol）和许多路由选择协议，因此互联网的网络层也叫做网际层或 IP 层。  

**数据链路层**  
数据链路层 (data link layer) 通常简称为链路层。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。 在两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP 数据报组装程帧，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。  

在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提出数据部分，上交给网络层。 控制信息还使接收端能够检测到所收到的帧中有误差错。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。如果需要改正数据在链路层传输时出现差错（这就是说，数据链路层不仅要检错，而且还要纠错），那么就要采用可靠性传输协议来纠正出现的差错。这种方法会使链路层的协议复杂些。  

**物理层**  
在物理层上所传送的数据单位是比特（bit）。   
物理层 (physical layer) 的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。 使其上面的数据链路层不必考虑网络的具体传输介质是什么。“透明传送比特流” 表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。

![计算机网络的七层体系结构](https://s2.ax1x.com/2019/08/12/mSkGGT.gif)

### TCP 三次握手和四次挥手
三次握手的过程：  
1、客户端发送带有 SYN 标志的数据包给服务端，客户端尝试建立连接  
2、服务端发送带有 SYN/ACK 标志的数据包给客户端，服务端回应 SYN 已收到  
3、客户端发送带有 ACK 标志的数据包给服务端，客户端回应 ACK 已收到  
![TCP 三次握手](https://s2.ax1x.com/2019/08/12/mSm2y8.png)  

TCP 通讯就是数据的发送与接收。  
三次握手目的是建立可靠的通信信道，双方确认自己与对方的发送与接收是正常的。  
> SYN 是 TCP/IP 建立连接时使用的握手信号。  
> 在客户机和服务器之间建立正常的 TCP 网络连接时，客户机首先发出一个 SYN 消息，服务器使用 SYN-ACK 应答表示接收到了这个消息，最后客户机再以 ACK (Acknowledgement 确认字符）消息响应。这样在客户机和服务器之间才能建立起可靠的 TCP 连接，数据才可以在客户机和服务器之间传递。  
> 
> 双方通信无误必须是两者互相发送信息都无误，传了 SYN，证明发送方到接收方的通道没有问题，但是接收方到发送方的通道还需要 ACK 信号来进行验证。  

四次挥手的过程：  
1、客户端发送一个 FIN，用来关闭客户端到服务器的数据传送  
2、服务器收到这个 FIN，它发回一个 ACK  
3、服务器关闭与客户端的连接，发送一个 FIN 给客户端  
4、客户端发回 ACK 报文确认  

![TCP 四次挥手](https://s2.ax1x.com/2019/08/13/m9VLmF.png)  

任何一方都可以在数据传送结束后发出连接释放的通知，等待对方确认后进入半关闭状态。当另一方也没有数据再发送的时候，则发出连接释放通知，对方确认后就完全关闭了 TCP 连接。  

### 浏览器访问 url 的过程
在浏览器打开一个 url 网页，会经历如下的过程：  
1、浏览器查找域名的 ip 地址（dns 查找过程：浏览器缓存>路由器缓存>dns 缓存）  
2、浏览器向 web 服务器发送一个 http 请求（带着 cookie）  
3、服务器接收请求并处理  
4、服务器发回一个 http 响应 
5、浏览器根据服务器的响应开始渲染页面  

### HTTP 请求方法和状态码
HTTP 的请求方法主要有如下 7 种：  
> GET：向指定资源发出读取请求，只用于读取数据  
> POST：向指定资源提交数据，请求服务器处理，比如提交表单或者上传文件  
> HEAD：和 GET一样，向指定资源发出读取请求，只不过不用传回资源的头部文本部分  
> PUT：向指定资源上传最新内容  
> DELETE：请求服务器删除资源  
> TRACE：回显服务器收到的请求，用于测试或者诊断  
> OPTIONS：使服务器传回该资源所支持的所有 HTTP 请求方法，用于测试服务器是否正常  

HTTP 状态码  
每条 HTTP 响应报文返回时都会携带一个状态码。状态码是一个三位数数字，告知客户端请求是否成功，或者是否需要采取其他动作。  
> 通常，HTTP 状态码归为 5 类。  
> 1xx 消息，请求被服务器接受，继续处理  
> 2xx 成功，请求已被服务器接受处理并返回  
> 3xx 重定向，需要完成一定操作才能继续请求  
> 4xx 请求错误，请求含有词法错误或者无法被执行  
> 5xx 服务器错误，服务器在处理某个正确请求时错误  

[更多 HTTP 状态码参考](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status)  

### 常见问题
1、TCP（Transmission Control Protocol，传输控制协议）和 UDP（User Data Protocol，用户数据报协议）的区别  
TCP 协议可靠；UDP 协议不可靠。  
TCP 协议是面向连接；UDP 协议采用无连接。  
TCP 协议应用在传输大量数据的场合；UDP 协议应用在少量数据的场合。  
TCP 协议速度慢；UDP 协议速度快。  
TCP 协议的发送方要确认接收方是否收到数据段（3次握手协议），TCP 协议采用窗口技术和流控制。  

