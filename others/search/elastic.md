
### 什么是 Elasticsearch
Elaticsearch 简写是 ES， Elasticsearch 是一个开源的高扩展的分布式全文检索引擎，它可以近乎实时的存储、检索数据；本身扩展性很好，可以扩展到上百台服务器，处理 PB 级别的数据。  
Elasticsearch 使用 Java 开发，并且使用 Lucene 作为其核心来实现所有索引和搜索的功能，Elasticsearch 的目的是通过简单的 RESTful API 来隐藏 Lucene 的复杂性，从而让全文搜索变得简单。  

> Lucene 只是一个库。  
> 如果想要直接使用它，你必须使用 Java 来作为开发语言并将其直接集成到你的应用中；糟糕的是，Lucene 非常复杂，你需要深入了解检索的相关知识来理解它是如何工作的。  
> Elasticsearch 通过简单的 RESTful API 来隐藏了 Lucene 的复杂性，从而让全文搜索变得简单。  

Elasticsearch 主要解决如下问题：  
> 1、快速检索相关数据  
> 2、能够统计检索结果  

### Elasticsearch 的工作原理
ElasticSearch 的节点启动后，它会默认使用多播的方式（multicast，使用单播需要修改配置）寻找集群中的其它节点，并与之建立连接；利用倒排索引检索后并把相应结果返回。

### Elasticsearch 的核心概念
- 集群（Cluster）
> Elasticearch 可以作为一个独立的搜索服务器；但是，为了处理大型数据集，实现容错和高可用性，Elasticearch 可以运行在许多台互相合作的服务器上  
> 这些服务器的集合称为 Elasticearch 集群

- 节点（Node）
> 物理概念，一个运行的 Elasticearch 实例，一般是一台机器上的一个进程

- 索引（Index）
> 逻辑概念，包括配置信息 mapping 和倒排正排数据文件，一个索引的数据文件可能会分布于一台机器，也有可能分布于多台机器  
> 索引的另外一层意思是倒排索引文件  

- 分片（Shard）
> 为了支持更大量的数据，索引一般会按某个维度分成多个部分，每个部分就是一个分片，分片被节点（Node）管理  
> 一个节点（Node）一般会管理多个分片，这些分片可能是属于同一份索引，也有可能属于不同索引，但是为了可靠性和可用性，同一个索引的分片尽量会分布在不同节点（Node）上  
> 分片有两种，主分片和副本分片  

- 副本（Replica）
> 同一个分片（Shard）的备份数据，一个分片可能会有 0 个或多个副本，这些副本中的数据保证强一致或最终一致

- 全文检索
> 全文检索是对一篇文章进行索引，可以根据关键字搜索，类似于 mysql 的模糊查询（like "%keyword%"）   
> 全文索引是把内容根据词的意义进行分词，然后分别创建索引  

### Elasticsearch 数据架构的主要概念
- 索引（Index）
> 类似于关系型数据库中的数据库（DataBase）

- 类型（Type）
> 类似于一个关系型数据库中的数据表（Table），可以有多个（但是高版本 Elasticsearch 将废除）

- 文档（Document）
> 类似于一个关系型数据库中数据表的每一行记录（ROW）

- 字段（Field）
> 类似于关系型数据库的字段属性（Column）

- 映射（Mapping）
> Mapping 定义索引（Index）下的类型（Type）的字段处理规则，即索引如何建立、索引类型、是否保存原始索引 JSON 文档、是否压缩原始 JSON 文档、是否需要分词处理、如何进行分词处理等
> Mapping 类似于关系型数据库的表、字段、表和字段的关系

- 增删改查（crud）
> Elasticsearch 有增 PUT/POST、删 Delete、改 _update、查 GET 等 Api 操作  
> 这就类似于关系型数据库的增 Insert、删 Delete、改 Update、查 Search

### Elasticsearch 的特点和优势
> 1、分布式实时文件存储，可将每一个字段存入索引，使其可以被检索到  
> 2、实时分析的分布式搜索引擎  
> 分布式：将索引拆分成多个分片，每个分片可以有零个或者多个副本  
> 集群中的每个数据节点都可以承载一个或多个分片，并且协调处理各种操作；负载再平衡和路由在大多数情况下自动完成  
> 3、可以运行在单台服务器上；也可以扩展到上百台的服务器，处理 PB 级别的结构化或非结构化数据  
> 4、支持插件机制，分词插件、同步插件、Hadoop插件、可视化插件等

### Elasticsearch 的集群部署


### Elasticsearch 的索引存储
Elasticsearch 1.X 版本的存储模块可以控制索引数据的存储方式（内存或磁盘上）。使用内存方式可以得到更好的性能，但是受限于实际可用的物理内存大小。虽然索引数据可以存储到内存中，但是相比基于 mmap 的存储方式，并没有太多的性能改善。  
Elasticsearch 2.X 版本删除直接存储内存的方式，并在内存中映射索引使用 mmap 系统调用（缺省默认值default_fs）。  

### Elasticsearch 的增删改查
