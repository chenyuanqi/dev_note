
### 游戏基础
一款好玩的游戏是如何打造出来的呢？  
游戏是一个程序，运行在 PC 或移动设备上，玩家通过与这个程序交互达到娱乐性的目的。  

**游戏引擎**  
游戏引擎是游戏研发的主程序接口，它为开发者提供了各种开发游戏的的工具，即可编辑游戏系统和实时图像系统的核心组件，其目的就在于让开发者可以快速的做出游戏而不必从零开始。游戏引擎包含渲染引擎、物理引擎、碰撞检测系统、网络引擎、音效引擎、脚本引擎、动画及场景管理等。

- 渲染引擎：是对游戏中的对象和场景起到渲染的效果，游戏中的角色都是通过渲染引擎将它的模型、动画、光影、特效等所有效果实时计算出来并展示到屏幕。
- 物理引擎：让对象运动遵循特定的规律，比如当角色跳起的时候，系统内定的重力值将决定它弹跳的高度及下落的速率。
- 碰撞检测系统：可以探测各物体的边缘，当两个 3D 物体在一起的时候，系统可以防止它们相互穿过。
- 网络引擎：是负责玩家与设备间的通信，处理来自键盘、鼠标及其它外设信号。若游戏联网，它也用来管理客户端与服务器间的通信。
- Lua 引擎：是 Lua 的服务器引擎，lua 是一种轻量级的嵌入式脚本语言，在网游开发中应用广泛。

一个游戏是引擎和资源组成的，资源包括图象、声音、动画等，游戏引擎就像一个发动机，控制着游戏的运行，它按游戏设计规则依次调用游戏资源。

**游戏名词**  

- CD-key：游戏的序列号或防盗密码；
- BugFree：测试管理平台，是一款基于 Web 的开源错误追踪工具；
- Ping：从客户端发送数据到服务器到接收到服务器反馈数据的时间，以 ms 计，若 Ping 值高会感觉延迟；
- Proxy Server：代理服务器，代理网络用户去取得网络信息；
- PU：付费用户；
- RU：注册用户；
- AU：活跃用户；
- DAU：平均每日活跃用户；
- CCU：同时在线人数；
- PCU：最高同时在线人数；
- ACU：平均同时在线人数；
- ARPPU：付费玩家平均收入；
- 封测：限定用户数量的游戏测试，用来对技术和游戏产品进行初步的验证，用户规模较小；
- 内测：面向一定数量用户进行的内部游戏测试，多用于检测游戏压力和功能有无漏洞；
- 公测：对所有用户公开的开放性的网络游戏测试。

**游戏分类**  
游戏的分类方法很多，可以按终端、内容、摄像类型、玩家格斗对象、玩家人数等来分，其中按内容来分最直观，它可以根据游戏的元素迅速锚定游戏范围。

- 按终端：主机游戏 (电视机游戏)、客户端游戏、网页游戏、手机游戏；
- 按内容：策略游戏、动作游戏、竞速游戏、卡牌游戏、冒险游戏、文字游戏等；
- 按摄影类型：2D 游戏、2.5 游戏、3D 游戏；
- 按格斗对象：PVE：PlayerVsEnvironment、PVP：PlayerVsPlayer；
- 按玩家人数：单机游戏（Singe-Player Game）、多人游戏（Muti-Player Game）、大型多人在线（Massive Multiplayer Online Game）。

**游戏开发流程**  
游戏开发从狭义上讲就是程序部门进行相关游戏程序的编写，从广义上讲，是整个游戏制作过程，这其中包括多个部门的人员配备。  

整个团队包含四个部门，即策划、美术、程序、制作人，各个部门负责不同的工作，协调完成整个游戏的开发。  
策划是团队的灵魂，也分执行策划、数据策划、表现策划、资源策划等，他们主要对游戏剧情、背景进行分析设计，对游戏中的各种规则进行描述及公式确定，对各种资料表格进行维护，对游戏中的特效、动作等进行收集并提出需求，进行 UI 设计及模型相关配置等。  
程序是团队的骨肉，也可细分为主程序、客户端引擎、服务器引擎、3D 程序、AI 程序、脚本程序、数据库程序等，他们主要负责确定程序的数据结构，确定策划方案的完成方法，将策划提出的各种需求用程序来实现，并为游戏开发过程提供良好的编辑工具。  
美术是团队的皮肤，可细分为人物原画、人物建模、材质贴图、人物动作、场景动画等，他们主要负责整个游戏的视觉风格，以及人物模型动作等的设计等。  
制作人主要进行游戏的外部统筹，市场调研、游戏开发进度、游戏版权、游戏宣传、游戏发布及音乐音效素材的管理都是制作人工作的范畴。  

对于游戏制作人来说，每个游戏从产生要消亡要经历各个阶段，下面是普遍适用的典型范例，但并不是每个游戏都要经历所有的时期。  

- 概念时期：就是整个游戏概念的确定，要做什么样的游戏，主题线索是什么；
- 原型开发时期：这个时期要制作游戏的原型，用来体验游戏的设计概念，从而纠正和改善不足的地方；
- 推广时期：此时是游戏开发方向出版方推广产品，向投资方展示游戏的设计概念、主要卖点、产品如何适应市场的需求、产品开发的可行性及具体的实现方案；
- 准备时期：这个时期主要处理游戏项目所涉及的商务及法律方面的事务，比如游戏专利、剧本版权、品牌商标等，从而组织开发团队制作大致的方案，确定游戏开发所需要的工具及其它细节问题；
- 制作时期： 这个时期是游戏制作的主体时期，完成 3D 模型的制作，场景制作，过场动画、画面渲染及音效录制等，游戏引擎和资源在此时期将被完全整合到一起。
- 质量保证时期：这个时期是游戏的 QA 或测试时期，主要用来保证游戏的各项功能是否完好，从而发现和修复各种 Bug 和错误；
- 母盘生成时期：这个时期是将游戏存盘交由平台厂商测试检测的时期，每个平台厂商的测试标准不尽相同，这个时期中也需要不断地测试改进游戏，修复 Bug，准备市场投放。
- 运营维护时期：这个时期是游戏发布后持续运营，在运营过程中发现问题，修复并更新升级的过程，这是一个长期的过程。

一个游戏完整的开发过程，归纳起来可分为五步。  

- 市场调研
- 需求分析
- 项目开发
- 测试（Alpha 测试、Beta 测试、Release 测试）
- Release

### 游戏安全
因为手游本身一些设计上的局限，或者考虑到用户体验，可能很多数据在客户端完成计算，这个层面会实现很多作弊行为，并且很多时候通过这样的途径可以达到和付费玩家同样的效果，这样一来很多用户可能不会再去付费，对于一些已经付费的玩家来讲，也会受到很大的伤害。  

对于游戏厂商，外挂问题带来的影响究竟有哪些呢？  

- 对开发者的影响  
当游戏出现外挂的时候，首当其冲的是游戏开发工程师，他们会收到很多运营需求或者很多策划需求，类似去做怎样的一套反外挂的系统，或者怎么样保护游戏的数据。  
但是，开发者很多时候忙于做游戏的核心玩法、核心逻辑，根本无暇顾及反外挂的开发，所以最后的结果基本都是不了了之。  

- 对运营团队的影响  
对运营团队来讲，如果游戏里面有很多外挂和投诉，会给运营增加很大的工作量。他们需要去确认，比如玩家举报的是不是真的外挂，在游戏里面是不是存在一些工作室。工作室会破坏游戏的经济系统，如很多游戏的金币兑换成人民币价格是在浮动的，如果这个区游戏工作室数量过多的话，经济系统就会出现非常严重的通货膨胀，大大损害游戏开发者的利益。  
运营很多时候会存在误封的形象，根据你获取的利益、游戏的表现以及跟你的角色是否匹配，会做出处罚。有时候会出现误封的情况，最后可能会反过来要求开发工程师增加相应的功能，比如你要增加他是不是在使用外挂，是不是存在各种各样的行为，需要开发工程师去配合运营做这样的升级，对开发者、运营者来讲，反外挂这件事情会给他们带来很大的工作负担。  

- 对游戏产品的影响  
业内一权威机构统计数据：当有 23% 的用户发现游戏里面有外挂的话，会选择放弃这个游戏。  
综合来看，不管对开发者、运营者也好，最后都会导致产品口碑越来越不好，比如某一款吃鸡游戏，网上言论也好、论坛也好，会发布很多外挂用户的截图或者留言，对整款游戏口碑越来越差，最后用户流失可能会非常严重。对产品来讲，这时候可能就要考虑怎么样做反外挂，他要花更多时间和精力去招聘安全人员。  
如果因为各种各样的安全问题，最后对游戏的损失是超过 5% 的，可能会涉及到产品的口碑会有影响，对游戏使用用户数量会越来越少，用户付费意愿越来越低。像吃鸡游戏，如果外挂严重收入下降是超过 5% 的。  

**如何构建安全护城河**  
1、手游全生命周期解决方案  
首先把安全产品分成三个阶段，在开发阶段要解决的是游戏数据安全问题，也就是数据的通信和存储问题；第二步的测试阶段会帮助游戏做安全测试，这有别于普通 APP 的测试，因为游戏安全问题跟普通 APP 安全问题不一样；第三阶段是主动防御核心，也就是应用加固。  

2、手游安全分析  
通过静态和动态两个方向对游戏做相应的数据分析，包括数据通信过程中是不是存在风险，存储在本地的数据有没有风险，所有这些外挂是不是可以应用在被测试的游戏上面...  

3、加固  
主动防御最核心的是游戏加固。  
DEX 层本身没有太多游戏的核心代码，比如资源文件、游戏引擎 SO 文件、U3D，都是需要保护的方向。我们提供的主动防御，主要是针对游戏反修改器和反加速器，概括起来主要是四点：  

- 业界首推 U3D 函数级加密，U3D 静态资源加密，U3D Assetbundle 资源加密等技术
- 强度领先，使用函数级加密，DLL 脚本代码时刻处于加密状态
- 覆盖面广，覆盖范围包括通用反模拟器，反模拟点击，游戏文件防篡改等
- 一键加固，支持三大平台，速度快且兼容性好，支持本地化部署等优点带给用户绝佳体验

